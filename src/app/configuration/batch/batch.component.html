<div class="user">
    <div fxLayout fxLayoutAlign="center">
        <h2 class="mat-h2">Batch Configuration</h2>
    </div>

    <div class="action">
        <button matTooltip="Add Batch" mat-button (click)="addBatch()" color="accent">Add</button>
    </div>

    <ng-template #loader>
        <div class="loadedStyle">
            <app-spinner></app-spinner>
        </div>
    </ng-template>

    <section [ngStyle]="{'margin-top':'50px'}" *ngIf="loaded; else loader">
        <error *ngIf="errMessage" [message]="errMessage" [hidden]="errhidden"></error>
        <div [hidden]="hiddenData">



            <mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="start_time">
                    <mat-header-cell *matHeaderCellDef> Start Date-Time</mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.start_time}}</span>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="end_time">
                    <mat-header-cell *matHeaderCellDef> End Date-Time</mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.end_time}}</span>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="product_name">
                    <mat-header-cell *matHeaderCellDef> Product Name </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.product_name}}</span>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="batch_id">
                    <mat-header-cell *matHeaderCellDef> Batch Id </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.batch_id}}</span>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="rackName">
                    <mat-header-cell *matHeaderCellDef> Rack Name </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.rackName}}</span>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="quantity">
                    <mat-header-cell *matHeaderCellDef> Quantity </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <span class="mobile-label">{{element.quantity}}</span>
                    </mat-cell>
                </ng-container>
 
                <!-- For Completion Status -->
                <ng-container matColumnDef="action">
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <button mat-icon-button matTooltip="Update Batch" matTooltipPosition="below"
                            (click)="updateBatch(element,'edit')">
                            <mat-icon aria-label="Update">edit</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="Remove Batch" matTooltipPosition="below"
                            (click)="updateBatch(element,'delete')">
                            <mat-icon aria-label="Remove">delete</mat-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
            <mat-paginator showFirstLastButtons [length]="datasetLength"
                [ngStyle]="{'color': '#3e6ceb','font-size':'15px','font-weigth':'bold'}"
                (page)="pageEvent = updateDataset($event)" [pageSize]="10" [pageSizeOptions]="[5,10,15,25,30]">
            </mat-paginator>

            <!-- <mat-accordion >
                <mat-expansion-panel class="panel" *ngFor="let item of dataSource">

                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <strong>Batch Name: {{item.batch_id}} | Product Name: {{item.product_name}}</strong>
                        </mat-panel-title>
                        <mat-panel-description>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <div class="inner-actions">
                        <button mat-icon-button matTooltip="Update Batch" matTooltipPosition="below"
                            (click)="updateBatch(item,'edit')">
                            <mat-icon aria-label="Update">edit</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="Remove Batch" matTooltipPosition="below"
                            (click)="updateBatch(item,'delete')">
                            <mat-icon aria-label="Remove">delete</mat-icon>
                        </button>
                    </div>
                    <div fxLayout [ngStyle]="{'margin-top':'10px'}">
                        <strong>Batch Details</strong>
                    </div>
                    <div fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="40px" class="contain">
                        <div fxFlex="50%" fxFlex.gt-sm="100%">
                            <div>start_time: {{item.start_time}}</div>

                        </div>
                        <div fxFlex="50%" fxFlex.gt-sm="100%">
                            <div>end_time: {{item.end_time}}</div>
                        </div>
                    </div>

                </mat-expansion-panel>
            </mat-accordion> -->


        </div>
    </section>

</div>